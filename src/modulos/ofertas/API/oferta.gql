#
# OFERTAS
#

query buscarOfertas(
  $busqueda: BuscarOfertaDto = {}
  $opciones: BuscarOpciones = {}
  $filtro: BuscarOfertaDto = {}
) {
  buscarOfertas(busqueda: $busqueda, opciones: $opciones, filtro: $filtro) {
    _id
    _creado
    _modificado
    nombre
    abreviacion
    catalogo {
      _id
      nombre
    }
    # preparados {
    #   producto {
    #     _id
    #   }
    #   cantidad
    # }
    ingredientes {
      tipo
      producto {
        _id
        nombre
      }
      marca {
        _id
        nombre
      }
      cantidad
    }
    imagen {
      cloudinaryUrl
    }
    precioSinFactura
    precioConFactura
  }
}
mutation crearOfertas(
  $datos: [CrearOfertaDto!]!
  $opciones: CrearOpciones = {}
) {
  crearOfertas(datos: $datos, opciones: $opciones) {
    _id
    _creado
    _modificado
    nombre
    abreviacion
    catalogo {
      _id
      nombre
    }
    imagen {
      cloudinaryUrl #no trae imagen
    }
  }
}

mutation modificarOfertaBasica(
  $busqueda: BuscarOfertaDto!
  $datos: ModificarOfertaDto!
  $opciones: ModificarOpciones = {}
) {
  modificarOfertas(busqueda: $busqueda, datos: $datos, opciones: $opciones) {
    _id
    _creado
    _modificado
    nombre
    abreviacion
    catalogo {
      _id
      nombre
    }
    imagen {
      cloudinaryUrl #no trae imagen
    }
  }
}

# modifica/agrega un ingrediente simple de una oferta
mutation modificarOfertaIngredientes(
  $busqueda: BuscarOfertaDto!
  $datos: ModificarOfertaDto!
  $opciones: ModificarOpciones = {}
) {
  modificarOfertas(busqueda: $busqueda, datos: $datos, opciones: $opciones) {
    _id
    _modificado
    nombre
    ingredientes {
      tipo
      producto {
        _id
        nombre
      }
      marca {
        _id
        nombre
      }
      cantidad
    }
  }
}

# MODIFICAR PRECIOS DE OFERTA
mutation modificarOfertaPrecios(
  $busqueda: BuscarOfertaDto!
  $datos: ModificarOfertaDto!
  $opciones: ModificarOpciones = {}
) {
  modificarOfertas(busqueda: $busqueda, datos: $datos, opciones: $opciones) {
    _id
    _modificado
    nombre
    precioSinFactura
    precioConFactura
  }
}

# BORRAR OFERTAS o OFERTA
mutation borrarOfertas(
  $busqueda: BuscarOfertaDto!
  $opciones: BorrarOpciones = {}
) {
  borrarOfertas(busqueda: $busqueda, opciones: $opciones) {
    _id
    nombre
  }
}

# CREA UNA ACCION
# mutation crearAccion($datos: CrearAccionDto!, $opciones: CrearOpciones = {}) {
#   crearAcciones(datos: [$datos], opciones: $opciones) {
#     _id
#   }
# }
